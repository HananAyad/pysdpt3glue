

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>sdpt3glue.result &mdash; SDPT3glue 0.9.2 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="SDPT3glue 0.9.2 documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> SDPT3glue
          

          
          </a>

          
            
            
              <div class="version">
                0.9.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../quickguide.html">Quick guide: Four ways to use sdpt3glue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sdpt3glue.html">sdpt3glue package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">SDPT3glue</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          









<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
        <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>sdpt3glue.result</li>
    <li class="wy-breadcrumbs-aside">
      
          
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for sdpt3glue.result</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="n">zeros</span>


<span class="n">_SDPT3_POS_STATUS_MAP_VERB</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s1">&#39;max(relative gap,infeasibility) &lt; gaptol (OPTIMAL)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;primal problem is suspected to be infeasible&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dual problem is suspected to be infeasible&#39;</span><span class="p">,</span>
    <span class="s1">&#39;norm(X) or norm(Z) diverging&#39;</span>
<span class="p">)</span>

<span class="n">_SDPT3_NEG_STATYS_MAP_VERB</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s1">&#39;max(relative gap,infeasibility) &lt; gaptol (OPTIMAL)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;relative gap &lt; infeasibility&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lack of progress in predictor or corrector&#39;</span><span class="p">,</span>
    <span class="s1">&#39;X or Z not positive definite&#39;</span><span class="p">,</span>
    <span class="s1">&#39;difficulty in computing predictor or corrector direction&#39;</span><span class="p">,</span>
    <span class="s1">&#39;progress in relative gap or infeasibility is bad&#39;</span><span class="p">,</span>
    <span class="s1">&#39;maximum number of iterations reached&#39;</span><span class="p">,</span>
    <span class="s1">&#39;primal infeasibility has deteriorated too much&#39;</span><span class="p">,</span>
    <span class="s1">&#39;progress in relative gap has deteriorated&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lack of progress in infeasibility&#39;</span>
<span class="p">)</span>


<div class="viewcode-block" id="make_result_dict"><a class="viewcode-back" href="../../sdpt3glue.html#sdpt3glue.result.make_result_dict">[docs]</a><span class="k">def</span> <span class="nf">make_result_dict</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Extracts some solve information from the log message and constructs a dict.</span>
<span class="sd">    This function will error if the message is empty or does not include the phrase</span>
<span class="sd">    &quot;SDPT3: Infeasible path-following algorithms&quot;, which is an indicator that the</span>
<span class="sd">    solver at least started okay.  If the log passes that basic test, we just retrieve</span>
<span class="sd">    what information we can.  If the dict doesn&#39;t at least contain a status_num and</span>
<span class="sd">    status_verb, you should check the log manually and see what went wrong.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">assert</span> <span class="n">can_use_msg</span><span class="p">(</span>
        <span class="n">msg</span><span class="p">),</span> <span class="s2">&quot;Stopping, the message is not properly formed: &quot;</span> <span class="o">+</span> <span class="n">msg</span>
    <span class="n">result_dict</span> <span class="o">=</span> <span class="n">extract_prop_dict</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">result_dict</span><span class="p">[</span><span class="s1">&#39;Xvars&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">extract_X</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">result_dict</span><span class="p">[</span><span class="s1">&#39;status_verb&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_verb_status</span><span class="p">(</span><span class="n">result_dict</span><span class="p">[</span><span class="s1">&#39;status_num&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">result_dict</span></div>


<div class="viewcode-block" id="make_result_summary"><a class="viewcode-back" href="../../sdpt3glue.html#sdpt3glue.result.make_result_summary">[docs]</a><span class="k">def</span> <span class="nf">make_result_summary</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Prints a basic summary of information about an SDPT3 solve result.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="s2">&quot;SDPT3 solve finished with status code </span><span class="si">{0[status_num]}</span><span class="s2">: </span><span class="si">{0[status_verb]}</span><span class="s2">&quot;</span>
        <span class="s2">&quot;Primal value (from X): </span><span class="si">{0[primal_z]}</span><span class="s2"> (infeasibility: </span><span class="si">{0[rel_primal_feas]}</span><span class="s2">)&quot;</span>
        <span class="s2">&quot;Dual value (bound): </span><span class="si">{0[dual_z]}</span><span class="s2"> (infeasibility: </span><span class="si">{0[rel_dual_feas]}</span><span class="s2">)&quot;</span>
        <span class="s2">&quot;Relative gap: </span><span class="si">{0[rel_gap]}</span><span class="s2">&quot;</span>
        <span class="s2">&quot;Solve time: </span><span class="si">{1}</span><span class="s2"> s&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="mf">0.001</span> <span class="o">*</span> <span class="nb">round</span><span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;solve_time&#39;</span><span class="p">]))</span></div>


<div class="viewcode-block" id="print_summary"><a class="viewcode-back" href="../../sdpt3glue.html#sdpt3glue.result.print_summary">[docs]</a><span class="k">def</span> <span class="nf">print_summary</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Prints out the summary produced by make_result_summary. &#39;&#39;&#39;</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Result summary:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">make_result_summary</span><span class="p">(</span><span class="n">result</span><span class="p">)</span></div>


<div class="viewcode-block" id="can_use_msg"><a class="viewcode-back" href="../../sdpt3glue.html#sdpt3glue.result.can_use_msg">[docs]</a><span class="k">def</span> <span class="nf">can_use_msg</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Checks to see if a message is non-trivial and contains the phrase</span>
<span class="sd">    &quot;SDPT3: Infeasible path-following algorithms&quot;, which should appear in the</span>
<span class="sd">    output log just before the result properties are listed.  While it&#39;s</span>
<span class="sd">    probably possible for this function to return True in a case where there&#39;s</span>
<span class="sd">    something wrong with the message, this is a good preliminary check to do.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">msg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s2">&quot;SDPT3: Infeasible path-following algorithms&quot;</span> <span class="ow">in</span> <span class="n">msg</span></div>


<div class="viewcode-block" id="extract_prop_dict"><a class="viewcode-back" href="../../sdpt3glue.html#sdpt3glue.result.extract_prop_dict">[docs]</a><span class="k">def</span> <span class="nf">extract_prop_dict</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Given the output message from running SDPT3solve.m, this function</span>
<span class="sd">    constructs and returns a dictionary of basic solve result information.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># the key is what we look for in the SDPT3 message output, the value is</span>
    <span class="c1"># the name of key we&#39;ll save the information to in the output dict.</span>
    <span class="n">keylist</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;number of iterations&#39;</span><span class="p">:</span> <span class="s1">&#39;iterations&#39;</span><span class="p">,</span>
               <span class="s1">&#39;primal objective value&#39;</span><span class="p">:</span> <span class="s1">&#39;primal_z&#39;</span><span class="p">,</span>
               <span class="s1">&#39;dual objective value&#39;</span><span class="p">:</span> <span class="s1">&#39;dual_z&#39;</span><span class="p">,</span>
               <span class="s1">&#39;gap&#39;</span><span class="p">:</span> <span class="s1">&#39;abs_gap&#39;</span><span class="p">,</span>
               <span class="s1">&#39;relative gap&#39;</span><span class="p">:</span> <span class="s1">&#39;rel_gap&#39;</span><span class="p">,</span>
               <span class="s1">&#39;actual relative gap&#39;</span><span class="p">:</span> <span class="s1">&#39;actual_rel_gap&#39;</span><span class="p">,</span>
               <span class="s1">&#39;rel. primal infeas&#39;</span><span class="p">:</span> <span class="s1">&#39;rel_primal_feas&#39;</span><span class="p">,</span>
               <span class="s1">&#39;rel. dual infeas&#39;</span><span class="p">:</span> <span class="s1">&#39;rel_dual_feas&#39;</span><span class="p">,</span>
               <span class="s1">&#39;Total CPU time (secs)&#39;</span><span class="p">:</span> <span class="s1">&#39;solve_time&#39;</span><span class="p">,</span>
               <span class="s1">&#39;CPU time per iteration&#39;</span><span class="p">:</span> <span class="s1">&#39;solve_time_per_iter&#39;</span><span class="p">,</span>
               <span class="s1">&#39;termination code&#39;</span><span class="p">:</span> <span class="s1">&#39;status_num&#39;</span><span class="p">}</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keylist</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">result_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">line_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
        <span class="s1">r&#39;\w[ \w:=.()]*[ \&lt;\&gt;]*=[ &lt;&gt;]*[ \d\.\-+e]*[\d\.\-+e]&#39;</span><span class="p">)</span>
    <span class="n">phrase_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;[\w\d\.\-+()][ \w\d\.\-+()]*&#39;</span><span class="p">)</span>

    <span class="n">line_list</span> <span class="o">=</span> <span class="n">line_pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">line_list</span><span class="p">:</span>
        <span class="n">line_parts</span> <span class="o">=</span> <span class="n">phrase_pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">line_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;dual  &quot;</span><span class="p">,</span> <span class="s2">&quot;dual&quot;</span><span class="p">)</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">handle_msg_item</span><span class="p">(</span><span class="n">line_parts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keylist</span> <span class="ow">and</span> <span class="n">keylist</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result_dict</span><span class="p">[</span><span class="n">keylist</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span> <span class="o">=</span> <span class="n">val</span>
    <span class="k">return</span> <span class="n">result_dict</span></div>


<div class="viewcode-block" id="extract_X"><a class="viewcode-back" href="../../sdpt3glue.html#sdpt3glue.result.extract_X">[docs]</a><span class="k">def</span> <span class="nf">extract_X</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Given the output message from running SDPT3solve.m, reconstruct the X</span>
<span class="sd">    matrix from the printed output and return it.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1"># First pull out the definitions.  Each starts with &#39;X{numbers} =&#39;</span>
    <span class="c1"># and we&#39;ll keep grabbing text until we hit any of the characters &gt;, &lt;, *,</span>
    <span class="c1"># or X</span>
    <span class="n">var_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;X\{[\d]*\} =[^&gt;&lt;\*X]*&#39;</span><span class="p">)</span>
    <span class="n">var_list</span> <span class="o">=</span> <span class="n">var_pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="c1"># Xlist will hold the solution variables or matrices</span>
    <span class="n">Xlist</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">var_list</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">Xmsg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">var_list</span><span class="p">):</span>
        <span class="c1"># Drop the &quot;X{something} =&quot; and strip extra whitespace</span>
        <span class="n">Xstart</span> <span class="o">=</span> <span class="n">Xmsg</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">Xmsg</span> <span class="o">=</span> <span class="n">Xmsg</span><span class="p">[</span><span class="n">Xstart</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="c1"># From Xmsg we can judge if the current variable is a matrix displaying in chunks</span>
        <span class="c1"># due to display width constraints, a matrix displaying all in one chunk,</span>
        <span class="c1"># or a scalar.</span>
        <span class="k">if</span> <span class="s1">&#39;Column&#39;</span> <span class="ow">in</span> <span class="n">Xmsg</span><span class="p">:</span>
            <span class="c1"># If X[i] is a chunked matrix, each chunk has a header containing &#39;Column&#39;</span>
            <span class="c1"># Split the data into chunks</span>
            <span class="n">chunk_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;Column[^C]*&#39;</span><span class="p">)</span>
            <span class="n">chunk_list</span> <span class="o">=</span> <span class="n">chunk_pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">Xmsg</span><span class="p">)</span>

            <span class="c1"># Use regular expressions to split the data into header parts and</span>
            <span class="c1"># data parts</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;Columns* [\d]+[ through [\d]+]?&#39;</span><span class="p">)</span>
            <span class="n">header_list</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">Xmsg</span><span class="p">)</span>
            <span class="n">chunk_list</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">Xmsg</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># drop the first, which is &#39;&#39;</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">header_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">chunk_list</span><span class="p">)</span>

            <span class="c1"># Find out how many columns the matrix has by grabbing the last column number</span>
            <span class="c1"># from the last header</span>
            <span class="n">int_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">r&#39;\d[\d]*&#39;</span><span class="p">)</span>
            <span class="n">int_list</span> <span class="o">=</span> <span class="n">int_pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">header_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">int_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="c1"># We&#39;ll count rows and initialize the matrix during the processing of</span>
            <span class="c1"># the first chunk.</span>

            <span class="c1"># Take a matching header and chunk and place the chunk&#39;s data in</span>
            <span class="c1"># the columns of Xlist[i] which are indicated by the header.</span>
            <span class="k">for</span> <span class="n">header</span><span class="p">,</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">header_list</span><span class="p">,</span> <span class="n">chunk_list</span><span class="p">):</span>
                <span class="c1"># Grab the column numbers from the header, note the first one. It&#39;s</span>
                <span class="c1"># the start column we&#39;ll use to place the chunk&#39;s data in the</span>
                <span class="c1"># matrix.</span>
                <span class="n">int_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">int_pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">header</span><span class="p">)]</span>
                <span class="n">col_start</span> <span class="o">=</span> <span class="n">int_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>

                <span class="c1"># Split the chunk into rows</span>
                <span class="n">chunk</span> <span class="o">=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">chunk</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39; *</span><span class="se">\n</span><span class="s1"> *&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span>
                <span class="n">chunk_lines</span> <span class="o">=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="c1"># Initialize the matrix now if it hasn&#39;t been done yet.</span>
                <span class="k">if</span> <span class="n">Xlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">chunk_lines</span><span class="p">)</span>
                    <span class="n">Xlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">))</span>

                <span class="c1"># Plug the row&#39;s data into the matrix</span>
                <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">chunk_lines</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">r&#39;\s+&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">)):</span>
                        <span class="n">Xlist</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">row</span><span class="p">,</span> <span class="n">col_start</span> <span class="o">+</span> <span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="nb">print</span> <span class="s2">&quot;Imported X[</span><span class="si">{0}</span><span class="s2">] as a matrix with shape </span><span class="si">{1}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Xlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

        <span class="k">elif</span> <span class="s1">&#39; &#39;</span> <span class="ow">in</span> <span class="n">Xmsg</span> <span class="ow">or</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">Xmsg</span><span class="p">:</span>
            <span class="c1"># Otherwise if it has spaces or line breaks it&#39;s a non-chunked</span>
            <span class="c1"># matrix</span>
            <span class="n">Xmsg</span> <span class="o">=</span> <span class="n">Xmsg</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">Xmsg</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39; +&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">Xmsg</span><span class="p">)</span>
            <span class="n">Xmsg</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39; *</span><span class="se">\n</span><span class="s1"> *&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">Xmsg</span><span class="p">)</span>
            <span class="n">Xmsg_lines</span> <span class="o">=</span> <span class="n">Xmsg</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="c1"># Initialize the matrix.</span>
            <span class="n">rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Xmsg_lines</span><span class="p">)</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Xmsg_lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
            <span class="n">Xlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">))</span>

            <span class="c1"># Plug the row&#39;s data into the matrix</span>
            <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">Xmsg_lines</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">r&#39;\s+&#39;</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())):</span>
                    <span class="n">Xlist</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">row</span><span class="p">,</span> <span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="nb">print</span> <span class="s2">&quot;Imported X[</span><span class="si">{0}</span><span class="s2">] as a matrix with shape </span><span class="si">{1}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Xlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Otherwise it&#39;s a scalar</span>
            <span class="n">Xlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">Xmsg</span><span class="p">)</span>
            <span class="nb">print</span> <span class="s2">&quot;Imported X[</span><span class="si">{0}</span><span class="s2">] as a scalar.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Xlist</span></div>


<div class="viewcode-block" id="handle_msg_item"><a class="viewcode-back" href="../../sdpt3glue.html#sdpt3glue.result.handle_msg_item">[docs]</a><span class="k">def</span> <span class="nf">handle_msg_item</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    A function that takes a string x and returns it&#39;s interpretation as an int,</span>
<span class="sd">    float, or string in that order of preference.  If x is None, None is</span>
<span class="sd">    returned.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="n">x</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">x</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">x</span></div>


<div class="viewcode-block" id="get_verb_status"><a class="viewcode-back" href="../../sdpt3glue.html#sdpt3glue.result.get_verb_status">[docs]</a><span class="k">def</span> <span class="nf">get_verb_status</span><span class="p">(</span><span class="n">status_num</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    A function that takes an SDPT3 numerical termination code as input and</span>
<span class="sd">    returns a phrase (string) explaining the implications of the termination</span>
<span class="sd">    code.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">status_num</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;no termination code given&quot;</span>
    <span class="k">elif</span> <span class="n">status_num</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_SDPT3_POS_STATUS_MAP_VERB</span><span class="p">[</span><span class="n">status_num</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_SDPT3_NEG_STATYS_MAP_VERB</span><span class="p">[</span><span class="o">-</span><span class="n">status_num</span><span class="p">]</span></div>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Patricia Gillett.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.9.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>